import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-BrZtJ_-2.js";import{d as L,f as _,c as g,o as N,u as r,a4 as m,a2 as H,a7 as s,ai as z,F as R,al as E,S as ue,ag as F,r as ie,ab as B,ac as n,k as a,af as M,H as T,G as b,B as _e}from"./vue-BG1emjmP.js";import{b0 as U,b1 as de,d as pe,a9 as me,aa as fe,a8 as ve,b2 as ge,aZ as he,b3 as xe,b as we,a2 as ke,b4 as ye,c as be,M as Ce,D as Se,w as Me,H as He,X as $e,Y as De,b5 as Ye,t as Ie,u as Oe,ag as Ve,Q as ze}from"./antd-D0j5ONzc.js";import{z as Be,_ as Te}from"./index-88P_9uxT.js";import"./context-0Xei7Wty.js";async function Ue(C){return Be("/list/basic-list",C)}const qe={key:0,class:"list-container"},Ae=L({__name:"index",props:{dataSource:{},itemHeight:{default:80}},setup(C){const d=C,f=_(),h=g(()=>`transform: translateY(${f.value}px)`),x=_(),u=g(()=>x.value?x.value.offsetHeight:0),$=g(()=>Math.ceil(u.value/d.itemHeight)+1),v=_(0),D=g(()=>v.value+$.value),t=_(),p=g(()=>{var c,i;if((c=t.value)!=null&&c.length)return d.itemHeight*((i=t.value)==null?void 0:i.length)}),w=g(()=>{var o;const c=Math.max(0,v.value),i=Math.min(D.value,t.value.length);return(o=t.value)==null?void 0:o.slice(c,i)});function k(){if(d.dataSource)t.value=d.dataSource;else{const c=Array.from({length:1e4});c.forEach((i,o)=>{c[o]=o}),t.value=c}}function Y(c){const i=c.target.scrollTop;v.value=Math.floor(i/d.itemHeight),f.value=v.value*d.itemHeight}return N(()=>{k()}),(c,i)=>r(t)?(m(),H("div",qe,[s("div",{ref_key:"scrollerContainerRef",ref:x,class:"scroller-container scrollbar",onScroll:Y},[s("div",{class:"pillar",style:z({height:`${r(p)}px`})},null,4),s("div",{class:"list",style:z(r(h))},[(m(!0),H(R,null,E(r(w),(o,e)=>(m(),H("div",{key:e,class:"item",style:z({height:`${c.itemHeight}px`})},[ue(c.$slots,"renderItem",{item:o},void 0,!0)],4))),128))],4)],544)])):F("",!0)}}),Le=Te(Ae,[["__scopeId","data-v-510fa109"]]),Ne={class:"flex flex-col items-center justify-center"},Re={class:"text-zinc-400"},Ee={style:{"font-size":"24px"}},Fe=s("span",null,"基本列表",-1),je={class:"ml-5"},Ge={href:"https://www.antdv.com/"},Pe={class:"flex text-gray-400"},Qe=s("div",{class:"flex flex-col items-center"},[s("div",null,"Owner"),s("div",null,"清风不问烟雨")],-1),Je={class:"px-10"},Xe=s("div",null,"开始时间",-1),Ze={class:"w-45 flex items-center"},Ke={class:"a-extra"},We=["onClick"],et=["onClick"],st=L({__name:"basic-list",setup(C){const d=_([{title:"我的待办",content:"8个任务"},{title:"本周任务平均处理时间",content:"32分钟"},{title:"本周完成任务数",content:"24个任务"}]),f=_("a"),h=_();function x(o){console.log("use value",o)}const u=_([]),$=_({pageSize:5,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,total:0});async function v(){var e;const o=await Ue();u.value=o.data??[],$.value.total=((e=o.data)==null?void 0:e.length)??0,console.log(u.value)}function D(o){U.confirm({title:"删除任务",icon:a(de),content:a("div",{},"确定要删除该任务吗?"),cancelText:"取消",okText:"确认",onOk(){u.value.splice(o,1)},class:"test"})}const t=ie({title:"",start:"",owner:"清风不问烟雨",description:"",index:0}),p=_(!1),w=_(!1);function k(o,e){e?(w.value=!0,p.value=!0):(w.value=!1,p.value=!0,t.title=o.title,t.description=o.content,t.start=pe(o.start),t.index=u.value.indexOf(o))}function Y(){let o=2;const e=U.success({title:"操作成功",content:`本窗口将在${o}后自动关闭`}),y=setInterval(()=>{o-=1,e.update({content:`本窗口将在${o}后自动关闭`})},1e3);setTimeout(()=>{clearInterval(y),e.destroy()},o*1e3)}function c(){for(const e in t)if(e!=="index"&&!t[e])return;const o=t.index;if(w.value){const e={title:t.title,content:t.description,start:t.start.format("YYYY-MM-DD HH:mm")};u.value.splice(0,0,e)}else for(const e in t)e==="start"?u.value[o][e]=t.start.format("YYYY-MM-DD HH:mm"):u.value[o][e]=t[e];p.value=!1,i(),Y()}function i(){console.log("cancel"),t.description="",t.owner="清风不问烟雨",t.start="",t.title=""}return N(()=>{v()}),(o,e)=>{const y=me,q=fe,I=ve,O=ge,j=he,G=xe,P=we,Q=ke,J=ye,A=be,X=Ce,Z=Se,K=Me,W=He,ee=$e,S=De,te=Ye,ne=Ie,ae=Oe,oe=Ve,le=ze,se=U,re=ce;return m(),B(re,null,{default:n(()=>[a(I,null,{default:n(()=>[a(q,{gutter:16},{default:n(()=>[(m(!0),H(R,null,E(r(d),(l,V)=>(m(),B(y,{key:V,xs:24,sm:8},{default:n(()=>[s("div",Ne,[s("div",Re,M(l.title),1),s("div",Ee,M(l.content),1)])]),_:2},1024))),128))]),_:1})]),_:1}),a(I,{class:"mt-5"},{title:n(()=>[a(I,{bordered:!1},{default:n(()=>[a(q,{style:{"font-weight":"normal"}},{default:n(()=>[a(y,{span:14},{default:n(()=>[Fe]),_:1}),a(y,{span:10,class:"flex"},{default:n(()=>[s("div",null,[a(j,{value:r(f),"onUpdate:value":e[0]||(e[0]=l=>T(f)?f.value=l:null)},{default:n(()=>[a(O,{value:"a"},{default:n(()=>[b(" 全部 ")]),_:1}),a(O,{value:"b"},{default:n(()=>[b(" 进行中 ")]),_:1}),a(O,{value:"c"},{default:n(()=>[b(" 等待中 ")]),_:1})]),_:1},8,["value"])]),s("div",je,[a(G,{value:r(h),"onUpdate:value":e[1]||(e[1]=l=>T(h)?h.value=l:null),placeholder:"请输入",style:{width:"270px"},onSearch:x},null,8,["value"])])]),_:1})]),_:1})]),_:1})]),default:n(()=>[r(u).length!==0?(m(),B(Le,{key:0,"data-source":r(u)},{renderItem:n(({item:l})=>[a(K,null,{actions:n(()=>[s("div",Pe,[Qe,s("div",Je,[Xe,s("div",null,M(l.start),1)]),s("div",Ze,[a(J,{percent:l.percent,status:l.status},null,8,["percent","status"])])])]),extra:n(()=>[s("div",Ke,[s("a",{key:"list-loadmore-edit",class:"m-4",onClick:V=>k(l)}," 编辑 ",8,We),a(Z,null,{overlay:n(()=>[a(X,null,{default:n(()=>[a(A,null,{default:n(()=>[s("a",{onClick:k},"编辑")]),_:1}),a(A,null,{default:n(()=>[s("a",{onClick:V=>D(l.index)},"删除",8,et)]),_:2},1024)]),_:2},1024)]),default:n(()=>[s("a",{class:"ant-dropdown-link",onClick:e[2]||(e[2]=_e(()=>{},["prevent"]))}," 更多 ")]),_:2},1024)])]),default:n(()=>[a(Q,{description:l.content},{title:n(()=>[s("a",Ge,M(l.title),1)]),avatar:n(()=>[a(P,{src:l.link},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])):F("",!0)]),_:1}),a(W,{type:"dashed",onClick:e[3]||(e[3]=l=>k(null,!0))},{default:n(()=>[b(" + 添加 ")]),_:1}),a(se,{open:r(p),"onUpdate:open":e[8]||(e[8]=l=>T(p)?p.value=l:null),title:"任务编辑",onOk:c,onCancel:i},{default:n(()=>[a(le,{model:r(t),name:"basic","label-col":{span:24},"wrapper-col":{span:24},autocomplete:"off"},{default:n(()=>[a(S,{label:"任务名称",name:"title",rules:[{required:!0,message:"请输入任务名称"}]},{default:n(()=>[a(ee,{value:r(t).title,"onUpdate:value":e[4]||(e[4]=l=>r(t).title=l)},null,8,["value"])]),_:1}),a(S,{label:"开始时间",name:"start",rules:[{required:!0,message:"请选择开始时间"}]},{default:n(()=>[a(te,{value:r(t).start,"onUpdate:value":e[5]||(e[5]=l=>r(t).start=l),class:"w-1/1","show-time":""},null,8,["value"])]),_:1}),a(S,{label:"任务负责人",name:"owner",rules:[{required:!0,message:"请输入任务负责人"}]},{default:n(()=>[a(ae,{value:r(t).owner,"onUpdate:value":e[6]||(e[6]=l=>r(t).owner=l),placeholder:"please select your zone"},{default:n(()=>[a(ne,{value:"owner"},{default:n(()=>[b(" 清风不问烟雨 ")]),_:1})]),_:1},8,["value"])]),_:1}),a(S,{label:"产品描述",name:"description",rules:[{required:!0,message:"请输入产品描述"}]},{default:n(()=>[a(oe,{value:r(t).description,"onUpdate:value":e[7]||(e[7]=l=>r(t).description=l),placeholder:"Basic usage",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])]),_:1})}}});export{st as default};

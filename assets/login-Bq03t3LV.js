var re=Object.defineProperty;var ie=(n,i,c)=>i in n?re(n,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[i]=c;var w=(n,i,c)=>ie(n,typeof i!="symbol"?i+"":i,c);import{_ as V,j as le,u as ce,k as de,f as pe,m as ue,g as me,n as ge,A as he}from"./index-PN1Wd5oG.js";import{a4 as p,a2 as _,a7 as l,d as _e,V as fe,r as ve,s as L,f as Z,ao as we,o as be,u as e,j as xe,af as h,ab as E,k as s,ac as d,a8 as ye,ae as ke,ag as q,F as b,G as $,a5 as $e,a6 as ze}from"./vue-BG1emjmP.js";import{_ as Ce}from"./logo-Ft4BtHHg.js";import{_ as Me}from"./index.vue_vue_type_style_index_0_lang-D7oiCiIi.js";import{O as Le,Q as Ee,U as qe,V as R,W as Se,E as Ie,J as Pe,T as Te,F as Ae,X as Re,Y as Ue,Z as Ve,H as Be}from"./antd-D0j5ONzc.js";var Ne=async(n=0)=>new Promise(i=>{const c=setTimeout(()=>{i(!0),clearTimeout(c)},n)});const Fe={name:"CarbonSun"},He={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"},Ke=l("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"},null,-1),Oe=[Ke];function Ze(n,i,c,f,g,S){return p(),_("svg",He,Oe)}const Qe=V(Fe,[["render",Ze]]),We={name:"CarbonMoon"},De={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"},Ge=l("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),Ye=[Ge];function je(n,i,c,f,g,S){return p(),_("svg",De,Ye)}const Je=V(We,[["render",je]]),Xe="/assets/bg4-DKEYr-Z2.png";function et(n,i=""){var g;const c=((g=le.currentRoute.value)==null?void 0:g.query)??{},f=Le(c,n)??i;return decodeURIComponent(f)}const t={width:0,height:0,canvas:null,ctx:null,circles:[],animate:!0,requestId:null},tt=function(n){if(!t||!n)throw new Error("no canvasInstance");t.width=window.innerWidth,t.height=window.innerHeight,t.canvas=n,t.canvas.width=t.width,t.canvas.height=t.height,t.ctx=t.canvas.getContext("2d"),t.circles=[];for(let i=0;i<t.width*.5;i++){const c=new ot;t.circles.push(c)}G(),at()};function W(){t.animate=!(document.body.scrollTop>t.height)}function D(){t.width=window.innerWidth,t.height=window.innerHeight,t.canvas.width=t.width,t.canvas.height=t.height}function G(){if(t.animate){t.ctx.clearRect(0,0,t.width,t.height);for(const n in t.circles)t.circles[n].draw()}t.requestId=requestAnimationFrame(G)}class ot{constructor(){w(this,"pos");w(this,"alpha");w(this,"scale");w(this,"velocity");w(this,"draw");this.pos={x:Math.random()*t.width,y:t.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random();const i=Math.random()*255,c=Math.random()*255,f=Math.random()*255;this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,t.ctx.beginPath(),t.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),t.ctx.fillStyle=`rgba(${i},${c},${f},${this.alpha})`,t.ctx.fill()}}}function at(){window.addEventListener("scroll",W),window.addEventListener("resize",D)}function st(){window.removeEventListener("scroll",W),window.removeEventListener("resize",D),cancelAnimationFrame(t.requestId)}const Q={init:tt,removeListeners:st},Y=n=>($e("data-v-908eb4ef"),n=n(),ze(),n),nt={class:"login-container"},rt={"h-screen":"","w-screen":"",absolute:"","z-10":""},it={class:"login-content flex-center"},lt={class:"ant-pro-form-login-main rounded"},ct={class:"flex-between h-15 px-4 mb-[2px]"},dt={class:"flex-end"},pt=Y(()=>l("span",{class:"ant-pro-form-login-logo"},[l("img",{"w-full":"","h-full":"","object-cover":"",src:Ce})],-1)),ut=Y(()=>l("span",{class:"ant-pro-form-login-title"}," 车联网管理系统 ",-1)),mt={class:"ant-pro-form-login-desc"},gt={class:"login-lang flex-center relative z-11"},ht={class:"box-border flex min-h-[520px]"},_t=ye('<div class="ant-pro-form-login-main-left min-h-[520px] flex-center bg-[var(--bg-color-container)]" data-v-908eb4ef><img src="'+Xe+'" class="h-20/24 w-88/100" data-v-908eb4ef><div class="aver2 min-h-[520px] max-w-[190px] flex-center" data-v-908eb4ef><a id="li9" class="w-1/1 flex-center" data-v-908eb4ef><img class="w-3/4" src="http://www.18gps.net/Skins/paobudiu/app/mobiledownload/images/QRcode.png" data-v-908eb4ef><h2 class="qRcodeTitle c-text" data-v-908eb4ef>云车管家</h2><p class="c-textSecondary" style="font-size:12px;" data-v-908eb4ef>一款操作简单方便的基础版APP，具备实时查车、回放轨迹、下发指令、实时接收设备故障与异常报警推送等基础功能。</p></a></div></div>',1),ft={class:"ant-pro-form-login-main-right px-5 w-[335px] flex-center flex-col relative z-11"},vt={class:"text-center py-6 text-2xl"},wt={flex:"","items-center":""},bt={flex:"","items-center":""},xt=["data-theme"],U=60,yt=_e({__name:"login",setup(n){const i=ce(),c=de(),f=pe(),{layoutSetting:g}=fe(f),S=ke(),j=ue(),o=ve({username:void 0,password:void 0,mobile:void 0,code:void 0,type:"account",remember:!0}),{t:r}=me(),z=L(),x=L(!1),I=L(!1),P=L(!1),B=Z(),{counter:N,pause:J,reset:X,resume:ee,isActive:C}=we(1e3,{controls:!0,immediate:!1,callback(m){m&&m===U&&J()}}),F=Z(!1),te=[{type:"number",asyncValidator:()=>new Promise((m,a)=>{!o.username||!o.password?a(new Error("获取验证码前需先输入账号密码！")):o.code?m(!0):F.value?a(new Error(r("pages.login.captcha.required"))):a(new Error("请获取验证码！"))})}];async function H(){try{!o.username||!o.password?await z.value.validate(["code"]):(console.log("校验通过"),z.value.validate(["code"]),x.value=!0,setTimeout(()=>{X(),ee(),x.value=!1,F.value=!0,i.success("验证码是：123456")},3e3))}catch(m){console.log(m),x.value=!1}}async function v(){var m;I.value=!0;try{await((m=z.value)==null?void 0:m.validate());let a;o.type==="account"?a={username:o.username,password:o.password,code:o.code}:a={mobile:o.mobile,code:o.code,type:"mobile"};const{data:y}=await ge(a);j.value=y==null?void 0:y.token,c.success({message:"登录成功",description:"欢迎回来！",duration:3});const T=et("redirect","/");S.push({path:T,replace:!0})}catch(a){a instanceof he&&(P.value=!0),I.value=!1}}return be(async()=>{await Ne(300),Q.init(e(B))}),xe(()=>{Q.removeListeners()}),(m,a)=>{const y=Je,T=Qe,K=Ie,oe=Pe,ae=Te,O=Ae,M=Re,k=Ue,se=Ve,A=Be,ne=Ee;return p(),_("div",nt,[l("div",rt,[l("canvas",{ref_key:"bubbleCanvas",ref:B},null,512)]),l("div",it,[l("div",lt,[l("div",ct,[l("div",dt,[pt,ut,l("span",mt,h(e(r)("pages.layouts.userLayout.title")),1)]),l("div",gt,[l("span",{class:"flex-center cursor-pointer text-16px",onClick:a[0]||(a[0]=u=>e(f).toggleTheme(e(g).theme==="dark"?"light":"dark"))},[e(g).theme==="light"?(p(),E(y,{key:0})):(p(),E(T,{key:1}))])])]),s(K,{"m-0":""}),l("div",ht,[_t,s(K,{"m-0":"",type:"vertical",class:"ant-pro-login-divider min-h-[520px]"}),l("div",ft,[l("div",vt,h(e(r)("pages.login.tips")),1),s(ne,{ref_key:"formRef",ref:z,model:e(o)},{default:d(()=>[s(ae,{activeKey:e(o).type,"onUpdate:activeKey":a[1]||(a[1]=u=>e(o).type=u),centered:""},{default:d(()=>[s(oe,{key:"account",tab:e(r)("pages.login.accountLogin.tab")},null,8,["tab"])]),_:1},8,["activeKey"]),e(P)&&e(o).type==="account"?(p(),E(O,{key:0,"mb-24px":"",message:e(r)("pages.login.accountLogin.errorMessage"),type:"error","show-icon":""},null,8,["message"])):q("",!0),e(P)&&e(o).type==="mobile"?(p(),E(O,{key:1,"mb-24px":"",message:e(r)("pages.login.phoneLogin.errorMessage"),type:"error","show-icon":""},null,8,["message"])):q("",!0),e(o).type==="account"?(p(),_(b,{key:2},[s(k,{name:"username",rules:[{required:!0,message:e(r)("pages.login.username.required")}]},{default:d(()=>[s(M,{value:e(o).username,"onUpdate:value":a[2]||(a[2]=u=>e(o).username=u),"allow-clear":"",autocomplete:"off",placeholder:e(r)("pages.login.username.placeholder"),size:"large",onPressEnter:v},{prefix:d(()=>[s(e(qe))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),s(k,{name:"password",rules:[{required:!0,message:e(r)("pages.login.password.required")}]},{default:d(()=>[s(se,{value:e(o).password,"onUpdate:value":a[3]||(a[3]=u=>e(o).password=u),"allow-clear":"",placeholder:e(r)("pages.login.password.placeholder"),size:"large",onPressEnter:v},{prefix:d(()=>[s(e(R))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),s(k,{name:"code",rules:te},{default:d(()=>[l("div",wt,[s(M,{value:e(o).code,"onUpdate:value":a[4]||(a[4]=u=>e(o).code=u),style:{flex:"1 1 0%",transition:"width 0.3s ease 0s","margin-right":"8px"},"allow-clear":"",placeholder:e(r)("pages.login.captcha.placeholder"),size:"large",onPressEnter:v},{prefix:d(()=>[s(e(R))]),_:1},8,["value","placeholder"]),s(A,{loading:e(x),disabled:e(C),size:"large",onClick:H},{default:d(()=>[e(C)?(p(),_(b,{key:1},[$(h(U-e(N))+" "+h(e(r)("pages.getCaptchaSecondText")),1)],64)):(p(),_(b,{key:0},[$(h(e(r)("pages.login.phoneLogin.getVerificationCode")),1)],64))]),_:1},8,["loading","disabled"])])]),_:1})],64)):q("",!0),e(o).type==="mobile"?(p(),_(b,{key:3},[s(k,{name:"mobile",rules:[{required:!0,message:e(r)("pages.login.phoneNumber.required")},{pattern:/^(86)?1([38][0-9]|4[579]|5[0-35-9]|6[6]|7[0135678]|9[89])[0-9]{8}$/,message:e(r)("pages.login.phoneNumber.invalid")}]},{default:d(()=>[s(M,{value:e(o).mobile,"onUpdate:value":a[5]||(a[5]=u=>e(o).mobile=u),"allow-clear":"",placeholder:e(r)("pages.login.phoneNumber.placeholder"),size:"large",onPressEnter:v},{prefix:d(()=>[s(e(Se))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),s(k,{name:"code",rules:[{required:!0,message:e(r)("pages.login.captcha.required")}]},{default:d(()=>[l("div",bt,[s(M,{value:e(o).code,"onUpdate:value":a[6]||(a[6]=u=>e(o).code=u),style:{flex:"1 1 0%",transition:"width 0.3s ease 0s","margin-right":"8px"},"allow-clear":"",placeholder:e(r)("pages.login.captcha.placeholder"),size:"large",onPressEnter:v},{prefix:d(()=>[s(e(R))]),_:1},8,["value","placeholder"]),s(A,{loading:e(x),disabled:e(C),size:"large",onClick:H},{default:d(()=>[e(C)?(p(),_(b,{key:1},[$(h(U-e(N))+" "+h(e(r)("pages.getCaptchaSecondText")),1)],64)):(p(),_(b,{key:0},[$(h(e(r)("pages.login.phoneLogin.getVerificationCode")),1)],64))]),_:1},8,["loading","disabled"])])]),_:1},8,["rules"])],64)):q("",!0),s(A,{type:"primary","mt-4":"",block:"",loading:e(I),size:"large",onClick:v},{default:d(()=>[$(h(e(r)("pages.login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])])])]),l("div",{"py-24px":"","px-50px":"",fixed:"","bottom-0":"","z-11":"","w-screen":"","data-theme":e(g).theme,"text-14px":""},[s(Me,{copyright:e(g).copyright,icp:"鲁ICP备2024071414号-1"},null,8,["copyright"])],8,xt)])}}}),Et=V(yt,[["__scopeId","data-v-908eb4ef"]]);export{Et as default};

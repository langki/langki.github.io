var le=Object.defineProperty;var ce=(s,i,c)=>i in s?le(s,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[i]=c;var y=(s,i,c)=>ce(s,typeof i!="symbol"?i+"":i,c);import{_ as K,j as de,u as ue,k as pe,f as me,m as ge,g as he,n as _e,q as fe,A as ve}from"./index-CEeQ7zLs.js";import{a4 as p,a2 as _,a7 as l,d as we,V as xe,r as be,s as A,f as B,ao as ye,o as ke,u as e,j as $e,af as h,ab as P,k as o,ac as u,a8 as Ce,ae as ze,ag as T,F as k,G as z,a5 as Me,a6 as Le}from"./vue-BG1emjmP.js";import{_ as qe}from"./logo-Ft4BtHHg.js";import{_ as Ee}from"./index.vue_vue_type_style_index_0_lang-ZmExum6B.js";import{Q as Se,U as Ie,V as Ae,W as N,X as Pe,F as Te,K as Re,T as Ue,H as Ve,Y as Be,Z as Ne,$ as Fe,I as Ke}from"./antd-DFqyiQ28.js";var He=async(s=0)=>new Promise(i=>{const c=setTimeout(()=>{i(!0),clearTimeout(c)},s)});const Ze={name:"CarbonSun"},Oe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"},Qe=l("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"},null,-1),We=[Qe];function De(s,i,c,f,g,M){return p(),_("svg",Oe,We)}const Ge=K(Ze,[["render",De]]),Ye={name:"CarbonMoon"},je={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"},Xe=l("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),Je=[Xe];function et(s,i,c,f,g,M){return p(),_("svg",je,Je)}const tt=K(Ye,[["render",et]]),at="/assets/bg4-DKEYr-Z2.png";function G(s,i=""){var g;const c=((g=de.currentRoute.value)==null?void 0:g.query)??{},f=Se(c,s)??i;return decodeURIComponent(f)}const t={width:0,height:0,canvas:null,ctx:null,circles:[],animate:!0,requestId:null},ot=function(s){if(!t||!s)throw new Error("no canvasInstance");t.width=window.innerWidth,t.height=window.innerHeight,t.canvas=s,t.canvas.width=t.width,t.canvas.height=t.height,t.ctx=t.canvas.getContext("2d"),t.circles=[];for(let i=0;i<t.width*.5;i++){const c=new st;t.circles.push(c)}J(),nt()};function j(){t.animate=!(document.body.scrollTop>t.height)}function X(){t.width=window.innerWidth,t.height=window.innerHeight,t.canvas.width=t.width,t.canvas.height=t.height}function J(){if(t.animate){t.ctx.clearRect(0,0,t.width,t.height);for(const s in t.circles)t.circles[s].draw()}t.requestId=requestAnimationFrame(J)}class st{constructor(){y(this,"pos");y(this,"alpha");y(this,"scale");y(this,"velocity");y(this,"draw");this.pos={x:Math.random()*t.width,y:t.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random();const i=Math.random()*255,c=Math.random()*255,f=Math.random()*255;this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,t.ctx.beginPath(),t.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),t.ctx.fillStyle=`rgba(${i},${c},${f},${this.alpha})`,t.ctx.fill()}}}function nt(){window.addEventListener("scroll",j),window.addEventListener("resize",X)}function rt(){window.removeEventListener("scroll",j),window.removeEventListener("resize",X),cancelAnimationFrame(t.requestId)}const Y={init:ot,removeListeners:rt},ee=s=>(Me("data-v-676d2911"),s=s(),Le(),s),it={class:"login-container"},lt={"h-screen":"","w-screen":"",absolute:"","z-10":""},ct={class:"login-content flex-center"},dt={class:"ant-pro-form-login-main rounded"},ut={class:"flex-between h-15 px-4 mb-[2px]"},pt={class:"flex-end"},mt=ee(()=>l("span",{class:"ant-pro-form-login-logo"},[l("img",{"w-full":"","h-full":"","object-cover":"",src:qe})],-1)),gt=ee(()=>l("span",{class:"ant-pro-form-login-title"}," 车联网管理系统 ",-1)),ht={class:"ant-pro-form-login-desc"},_t={class:"login-lang flex-center relative z-11"},ft={class:"box-border flex min-h-[520px]"},vt=Ce('<div class="ant-pro-form-login-main-left min-h-[520px] flex-center bg-[var(--bg-color-container)]" data-v-676d2911><img src="'+at+'" class="h-20/24 w-88/100" data-v-676d2911><div class="aver2 min-h-[520px] max-w-[190px] flex-center" data-v-676d2911><a id="li9" class="w-1/1 flex-center" data-v-676d2911><img class="w-3/4" src="http://www.18gps.net/Skins/paobudiu/app/mobiledownload/images/QRcode.png" data-v-676d2911><h2 class="qRcodeTitle c-text" data-v-676d2911>云车管家</h2><p class="c-textSecondary" style="font-size:12px;" data-v-676d2911>一款操作简单方便的基础版APP，具备实时查车、回放轨迹、下发指令、实时接收设备故障与异常报警推送等基础功能。</p></a></div></div>',1),wt={class:"ant-pro-form-login-main-right px-5 w-[335px] flex-center flex-col relative z-11"},xt={class:"text-center py-6 text-2xl"},bt={flex:"","items-center":""},yt={flex:"","items-center":""},kt=["data-theme"],F=60,$t=we({__name:"login",setup(s){const i=ue(),c=pe(),f=me(),{layoutSetting:g}=xe(f),M=ze(),H=ge(),a=be({username:void 0,password:void 0,mobile:void 0,code:void 0,type:"account",remember:!0}),{t:n}=he(),L=A(),$=A(!1),q=A(!1),R=B(""),x=A(!1),Z=B(),{counter:O,pause:te,reset:Q,resume:ae,isActive:E}=ye(1e3,{controls:!0,immediate:!1,callback(d){d&&d===F&&te()}}),U=B(!1),oe=[{type:"number",asyncValidator:()=>new Promise((d,r)=>{!a.username||!a.password?r(new Error("获取验证码前需先输入账号密码！")):a.code?d(!0):U.value?r(new Error(n("pages.login.captcha.required"))):r(new Error("请获取验证码！"))})}];async function W(){try{if(!a.username||!a.password)await L.value.validate(["code"]);else{$.value=!0;const d=await _e({account:a.username,pwd:a.password});d.code===0?(Q(),ae(),U.value=!0,i.success(d.data?`验证码已经发送到你的手机：${d.data}`:"验证码已经发送到你的手机"),x.value=!1):(Q(),U.value=!1,R.value=d.msg||"",x.value=!0),L.value.resetFields(["code"]),$.value=!1}}catch(d){console.log(d),$.value=!1}}async function b(){var d,r;q.value=!0;try{await((d=L.value)==null?void 0:d.validate());let w;a.type==="account"?w={account:a.username,pwd:a.password,authCode:a.code}:w={mobile:a.mobile,code:a.code,type:"mobile"},H.value="test",c.success({message:"登录成功",description:"欢迎回来！",duration:3}),M.push({path:G("redirect","/"),replace:!0});return}catch(w){w instanceof ve&&(x.value=!0),q.value=!1}}return ke(async()=>{await He(300),Y.init(e(Z))}),$e(()=>{Y.removeListeners()}),(d,r)=>{const w=tt,v=Ge,S=Te,se=Re,ne=Ue,D=Ve,I=Be,C=Ne,re=Fe,V=Ke,ie=Ie;return p(),_("div",it,[l("div",lt,[l("canvas",{ref_key:"bubbleCanvas",ref:Z},null,512)]),l("div",ct,[l("div",dt,[l("div",ut,[l("div",pt,[mt,gt,l("span",ht,h(e(n)("pages.layouts.userLayout.title")),1)]),l("div",_t,[l("span",{class:"flex-center cursor-pointer text-16px",onClick:r[0]||(r[0]=m=>e(f).toggleTheme(e(g).theme==="dark"?"light":"dark"))},[e(g).theme==="light"?(p(),P(w,{key:0})):(p(),P(v,{key:1}))])])]),o(S,{"m-0":""}),l("div",ft,[vt,o(S,{"m-0":"",type:"vertical",class:"ant-pro-login-divider min-h-[520px]"}),l("div",wt,[l("div",xt,h(e(n)("pages.login.tips")),1),o(ie,{ref_key:"formRef",ref:L,model:e(a)},{default:u(()=>[o(ne,{activeKey:e(a).type,"onUpdate:activeKey":r[1]||(r[1]=m=>e(a).type=m),centered:""},{default:u(()=>[o(se,{key:"account",tab:e(n)("pages.login.accountLogin.tab")},null,8,["tab"])]),_:1},8,["activeKey"]),e(x)&&e(a).type==="account"?(p(),P(D,{key:0,"mb-24px":"",message:e(R)||e(n)("pages.login.accountLogin.errorMessage"),type:"error","show-icon":""},null,8,["message"])):T("",!0),e(x)&&e(a).type==="mobile"?(p(),P(D,{key:1,"mb-24px":"",message:e(n)("pages.login.phoneLogin.errorMessage"),type:"error","show-icon":""},null,8,["message"])):T("",!0),e(a).type==="account"?(p(),_(k,{key:2},[o(C,{name:"username",rules:[{required:!0,message:e(n)("pages.login.username.required")}]},{default:u(()=>[o(I,{value:e(a).username,"onUpdate:value":r[2]||(r[2]=m=>e(a).username=m),"allow-clear":"",autocomplete:"off",placeholder:e(n)("pages.login.username.placeholder"),size:"large",onPressEnter:b},{prefix:u(()=>[o(e(Ae))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),o(C,{name:"password",rules:[{required:!0,message:e(n)("pages.login.password.required")}]},{default:u(()=>[o(re,{value:e(a).password,"onUpdate:value":r[3]||(r[3]=m=>e(a).password=m),"allow-clear":"",placeholder:e(n)("pages.login.password.placeholder"),size:"large",onPressEnter:b},{prefix:u(()=>[o(e(N))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),o(C,{name:"code",rules:oe},{default:u(()=>[l("div",bt,[o(I,{value:e(a).code,"onUpdate:value":r[4]||(r[4]=m=>e(a).code=m),style:{flex:"1 1 0%",transition:"width 0.3s ease 0s","margin-right":"8px"},"allow-clear":"",placeholder:e(n)("pages.login.captcha.placeholder"),size:"large",onPressEnter:b},{prefix:u(()=>[o(e(N))]),_:1},8,["value","placeholder"]),o(V,{loading:e($),disabled:e(E),size:"large",onClick:W},{default:u(()=>[e(E)?(p(),_(k,{key:1},[z(h(F-e(O))+" "+h(e(n)("pages.getCaptchaSecondText")),1)],64)):(p(),_(k,{key:0},[z(h(e(n)("pages.login.phoneLogin.getVerificationCode")),1)],64))]),_:1},8,["loading","disabled"])])]),_:1})],64)):T("",!0),e(a).type==="mobile"?(p(),_(k,{key:3},[o(C,{name:"mobile",rules:[{required:!0,message:e(n)("pages.login.phoneNumber.required")},{pattern:/^(86)?1([38][0-9]|4[579]|5[0-35-9]|6[6]|7[0135678]|9[89])[0-9]{8}$/,message:e(n)("pages.login.phoneNumber.invalid")}]},{default:u(()=>[o(I,{value:e(a).mobile,"onUpdate:value":r[5]||(r[5]=m=>e(a).mobile=m),"allow-clear":"",placeholder:e(n)("pages.login.phoneNumber.placeholder"),size:"large",onPressEnter:b},{prefix:u(()=>[o(e(Pe))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),o(C,{name:"code",rules:[{required:!0,message:e(n)("pages.login.captcha.required")}]},{default:u(()=>[l("div",yt,[o(I,{value:e(a).code,"onUpdate:value":r[6]||(r[6]=m=>e(a).code=m),style:{flex:"1 1 0%",transition:"width 0.3s ease 0s","margin-right":"8px"},"allow-clear":"",placeholder:e(n)("pages.login.captcha.placeholder"),size:"large",onPressEnter:b},{prefix:u(()=>[o(e(N))]),_:1},8,["value","placeholder"]),o(V,{loading:e($),disabled:e(E),size:"large",onClick:W},{default:u(()=>[e(E)?(p(),_(k,{key:1},[z(h(F-e(O))+" "+h(e(n)("pages.getCaptchaSecondText")),1)],64)):(p(),_(k,{key:0},[z(h(e(n)("pages.login.phoneLogin.getVerificationCode")),1)],64))]),_:1},8,["loading","disabled"])])]),_:1},8,["rules"])],64)):T("",!0),o(V,{type:"primary","mt-4":"",block:"",loading:e(q),size:"large",onClick:b},{default:u(()=>[z(h(e(n)("pages.login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])])])]),l("div",{"py-24px":"","px-50px":"",fixed:"","bottom-0":"","z-11":"","w-screen":"","data-theme":e(g).theme,"text-14px":""},[o(Ee,{copyright:e(g).copyright,icp:"闽ICP备2024054817号"},null,8,["copyright"])],8,kt)])}}}),St=K($t,[["__scopeId","data-v-676d2911"]]);export{St as default};
